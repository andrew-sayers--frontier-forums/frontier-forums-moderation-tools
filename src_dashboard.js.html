<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: src/dashboard.js</title>


    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">


    <script>
    var config = {"monospaceLinks":false,"cleverLinks":true,"default":{"outputSourceFiles":true}};
    </script>



</head>
<body>
<div id="wrap" class="clearfix">

<div class="navigation">
    <h3 class="applicationName"><a href="index.html"></a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">

        <li class="item" data-name="AccountHighlighter">
            <span class="title">
                <a href="AccountHighlighter.html">AccountHighlighter</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="AccountHighlighter#highlight"><a href="AccountHighlighter.html#highlight">highlight</a></li>

                <li data-name="AccountHighlighter#highlight_to_element"><a href="AccountHighlighter.html#highlight_to_element">highlight_to_element</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Action">
            <span class="title">
                <a href="Action.html">Action</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="Action#blockers"><a href="Action.html#blockers">blockers</a></li>

                <li data-name="Action#fire"><a href="Action.html#fire">fire</a></li>

                <li data-name="Action#fire_with_journal"><a href="Action.html#fire_with_journal">fire_with_journal</a></li>

                <li data-name="Action#long_description"><a href="Action.html#long_description">long_description</a></li>

                <li data-name="Action#then"><a href="Action.html#then">then</a></li>

                <li data-name="Action#title"><a href="Action.html#title">title</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="ActionWidget">
            <span class="title">
                <a href="ActionWidget.html">ActionWidget</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="ActionWidget#action"><a href="ActionWidget.html#action">action</a></li>

                <li data-name="ActionWidget#reset_value"><a href="ActionWidget.html#reset_value">reset_value</a></li>

                <li data-name="ActionWidget#resolve_value"><a href="ActionWidget.html#resolve_value">resolve_value</a></li>

                <li data-name="ActionWidget#set_value"><a href="ActionWidget.html#set_value">set_value</a></li>

                <li data-name="ActionWidget#update_previous_values"><a href="ActionWidget.html#update_previous_values">update_previous_values</a></li>

                <li data-name="ActionWidget#val"><a href="ActionWidget.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="AvailableUsers">
            <span class="title">
                <a href="AvailableUsers.html">AvailableUsers</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="AvailableUsers#active"><a href="AvailableUsers.html#active">active</a></li>

                <li data-name="AvailableUsers#is_ours"><a href="AvailableUsers.html#is_ours">is_ours</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="BulletinBoard">
            <span class="title">
                <a href="BulletinBoard.html">BulletinBoard</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="BulletinBoard#_add_standard_data"><a href="BulletinBoard.html#_add_standard_data">_add_standard_data</a></li>

                <li data-name="BulletinBoard#build_url"><a href="BulletinBoard.html#build_url">build_url</a></li>

                <li data-name="BulletinBoard#config"><a href="BulletinBoard.html#config">config</a></li>

                <li data-name="BulletinBoard#detect_post_error"><a href="BulletinBoard.html#detect_post_error">detect_post_error</a></li>

                <li data-name="BulletinBoard#fix_url"><a href="BulletinBoard.html#fix_url">fix_url</a></li>

                <li data-name="BulletinBoard#get"><a href="BulletinBoard.html#get">get</a></li>

                <li data-name="BulletinBoard#get_pages"><a href="BulletinBoard.html#get_pages">get_pages</a></li>

                <li data-name="BulletinBoard#get_posts"><a href="BulletinBoard.html#get_posts">get_posts</a></li>

                <li data-name="BulletinBoard#parse"><a href="BulletinBoard.html#parse">parse</a></li>

                <li data-name="BulletinBoard#parse_post"><a href="BulletinBoard.html#parse_post">parse_post</a></li>

                <li data-name="BulletinBoard#ping"><a href="BulletinBoard.html#ping">ping</a></li>

                <li data-name="BulletinBoard#post"><a href="BulletinBoard.html#post">post</a></li>

                <li data-name="BulletinBoard#process_posts"><a href="BulletinBoard.html#process_posts">process_posts</a></li>

                <li data-name="BulletinBoard#quotes_process"><a href="BulletinBoard.html#quotes_process">quotes_process</a></li>

                <li data-name="BulletinBoard#stringify"><a href="BulletinBoard.html#stringify">stringify</a></li>

                <li data-name="BulletinBoard#thread_posts"><a href="BulletinBoard.html#thread_posts">thread_posts</a></li>

                <li data-name="BulletinBoard#when"><a href="BulletinBoard.html#when">when</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Cacheable">
            <span class="title">
                <a href="Cacheable.html">Cacheable</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="Cacheable#refresh"><a href="Cacheable.html#refresh">refresh</a></li>

                <li data-name="Cacheable#update_cache"><a href="Cacheable.html#update_cache">update_cache</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Dashboard">
            <span class="title">
                <a href="Dashboard.html">Dashboard</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="Dashboard#refresh"><a href="Dashboard.html#refresh">refresh</a></li>

                <li data-name="Dashboard#update_cache"><a href="Dashboard.html#update_cache">update_cache</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Deadline">
            <span class="title">
                <a href="Deadline.html">Deadline</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="Deadline#action"><a href="Deadline.html#action">action</a></li>

                <li data-name="Deadline#reset_value"><a href="Deadline.html#reset_value">reset_value</a></li>

                <li data-name="Deadline#resolve_value"><a href="Deadline.html#resolve_value">resolve_value</a></li>

                <li data-name="Deadline#set_value"><a href="Deadline.html#set_value">set_value</a></li>

                <li data-name="Deadline#update_previous_values"><a href="Deadline.html#update_previous_values">update_previous_values</a></li>

                <li data-name="Deadline#val"><a href="Deadline.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="DuplicateAccountList">
            <span class="title">
                <a href="DuplicateAccountList.html">DuplicateAccountList</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="DuplicateAccountList#val"><a href="DuplicateAccountList.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="DuplicateAccountPolicy">
            <span class="title">
                <a href="DuplicateAccountPolicy.html">DuplicateAccountPolicy</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="DuplicateAccountPolicy#_Single">
            <span class="title">
                <a href="DuplicateAccountPolicy__Single.html">DuplicateAccountPolicy#_Single</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="ExtraPost">
            <span class="title">
                <a href="ExtraPost.html">ExtraPost</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="ExtraPost#action"><a href="ExtraPost.html#action">action</a></li>

                <li data-name="ExtraPost#reset_value"><a href="ExtraPost.html#reset_value">reset_value</a></li>

                <li data-name="ExtraPost#resolve_value"><a href="ExtraPost.html#resolve_value">resolve_value</a></li>

                <li data-name="ExtraPost#set_value"><a href="ExtraPost.html#set_value">set_value</a></li>

                <li data-name="ExtraPost#update_previous_values"><a href="ExtraPost.html#update_previous_values">update_previous_values</a></li>

                <li data-name="ExtraPost#val"><a href="ExtraPost.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="InappropriateUsernamePolicy">
            <span class="title">
                <a href="InappropriateUsernamePolicy.html">InappropriateUsernamePolicy</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="IPAddressReport">
            <span class="title">
                <a href="IPAddressReport.html">IPAddressReport</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="IPAddressReport#action"><a href="IPAddressReport.html#action">action</a></li>

                <li data-name="IPAddressReport#bbcode"><a href="IPAddressReport.html#bbcode">bbcode</a></li>

                <li data-name="IPAddressReport#cache_timeout"><a href="IPAddressReport.html#cache_timeout">cache_timeout</a></li>

                <li data-name="IPAddressReport#html"><a href="IPAddressReport.html#html">html</a></li>

                <li data-name="IPAddressReport#users"><a href="IPAddressReport.html#users">users</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="MiscellaneousCache">
            <span class="title">
                <a href="MiscellaneousCache.html">MiscellaneousCache</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="MiscellaneousCache#refresh"><a href="MiscellaneousCache.html#refresh">refresh</a></li>

                <li data-name="MiscellaneousCache#update_cache"><a href="MiscellaneousCache.html#update_cache">update_cache</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="NotificationSelector">
            <span class="title">
                <a href="NotificationSelector.html">NotificationSelector</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="NotificationSelector#action"><a href="NotificationSelector.html#action">action</a></li>

                <li data-name="NotificationSelector#add_known_keys"><a href="NotificationSelector.html#add_known_keys">add_known_keys</a></li>

                <li data-name="NotificationSelector#extra_block"><a href="NotificationSelector.html#extra_block">extra_block</a></li>

                <li data-name="NotificationSelector#mode"><a href="NotificationSelector.html#mode">mode</a></li>

                <li data-name="NotificationSelector#mode_switcher"><a href="NotificationSelector.html#mode_switcher">mode_switcher</a></li>

                <li data-name="NotificationSelector#reset_value"><a href="NotificationSelector.html#reset_value">reset_value</a></li>

                <li data-name="NotificationSelector#resolve_value"><a href="NotificationSelector.html#resolve_value">resolve_value</a></li>

                <li data-name="NotificationSelector#set_value"><a href="NotificationSelector.html#set_value">set_value</a></li>

                <li data-name="NotificationSelector#update_previous_values"><a href="NotificationSelector.html#update_previous_values">update_previous_values</a></li>

                <li data-name="NotificationSelector#val"><a href="NotificationSelector.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Policy">
            <span class="title">
                <a href="Policy.html">Policy</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="Policy#_build_keys"><a href="Policy.html#_build_keys">_build_keys</a></li>

                <li data-name="Policy#_build_widget_args"><a href="Policy.html#_build_widget_args">_build_widget_args</a></li>

                <li data-name="Policy#check"><a href="Policy.html#check">check</a></li>

                <li data-name="Policy#close_thread"><a href="Policy.html#close_thread">close_thread</a></li>

                <li data-name="Policy#deadline_action"><a href="Policy.html#deadline_action">deadline_action</a></li>

                <li data-name="Policy#deadline_args"><a href="Policy.html#deadline_args">deadline_args</a></li>

                <li data-name="Policy#duplicate_account_list_args"><a href="Policy.html#duplicate_account_list_args">duplicate_account_list_args</a></li>

                <li data-name="Policy#extra_post_action"><a href="Policy.html#extra_post_action">extra_post_action</a></li>

                <li data-name="Policy#extra_post_args"><a href="Policy.html#extra_post_args">extra_post_args</a></li>

                <li data-name="Policy#get"><a href="Policy.html#get">get</a></li>

                <li data-name="Policy#keys"><a href="Policy.html#keys">keys</a></li>

                <li data-name="Policy#notification_selector_action"><a href="Policy.html#notification_selector_action">notification_selector_action</a></li>

                <li data-name="Policy#notification_selector_args"><a href="Policy.html#notification_selector_args">notification_selector_args</a></li>

                <li data-name="Policy#resolve"><a href="Policy.html#resolve">resolve</a></li>

                <li data-name="Policy#resolve_post"><a href="Policy.html#resolve_post">resolve_post</a></li>

                <li data-name="Policy#severity_slider_args"><a href="Policy.html#severity_slider_args">severity_slider_args</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="RecentList">
            <span class="title">
                <a href="RecentList.html">RecentList</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="RecentList#get"><a href="RecentList.html#get">get</a></li>

                <li data-name="RecentList#push"><a href="RecentList.html#push">push</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Report">
            <span class="title">
                <a href="Report.html">Report</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="SeveritySlider">
            <span class="title">
                <a href="SeveritySlider.html">SeveritySlider</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="SeveritySlider#val"><a href="SeveritySlider.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="SharedStore">
            <span class="title">
                <a href="SharedStore.html">SharedStore</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="SharedStore#change"><a href="SharedStore.html#change">change</a></li>

                <li data-name="SharedStore#interval_transaction"><a href="SharedStore.html#interval_transaction">interval_transaction</a></li>

                <li data-name="SharedStore#transaction"><a href="SharedStore.html#transaction">transaction</a></li>

                <li data-name="SharedStore#val"><a href="SharedStore.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="ThreadManagementPolicy">
            <span class="title">
                <a href="ThreadManagementPolicy.html">ThreadManagementPolicy</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="ThreadManagementPolicy#unmerge_action"><a href="ThreadManagementPolicy.html#unmerge_action">unmerge_action</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="ThreadTitleSelector">
            <span class="title">
                <a href="ThreadTitleSelector.html">ThreadTitleSelector</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="ThreadTitleSelector#check"><a href="ThreadTitleSelector.html#check">check</a></li>

                <li data-name="ThreadTitleSelector#focus"><a href="ThreadTitleSelector.html#focus">focus</a></li>

                <li data-name="ThreadTitleSelector#val"><a href="ThreadTitleSelector.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Variables">
            <span class="title">
                <a href="Variables.html">Variables</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="Variables#check"><a href="Variables.html#check">check</a></li>

                <li data-name="Variables#escape"><a href="Variables.html#escape">escape</a></li>

                <li data-name="Variables#get"><a href="Variables.html#get">get</a></li>

                <li data-name="Variables#get_language"><a href="Variables.html#get_language">get_language</a></li>

                <li data-name="Variables#parse"><a href="Variables.html#parse">parse</a></li>

                <li data-name="Variables#refresh"><a href="Variables.html#refresh">refresh</a></li>

                <li data-name="Variables#resolve"><a href="Variables.html#resolve">resolve</a></li>

                <li data-name="Variables#set_namespaces"><a href="Variables.html#set_namespaces">set_namespaces</a></li>

                <li data-name="Variables#update_cache"><a href="Variables.html#update_cache">update_cache</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="VariablesFromFirstPost">
            <span class="title">
                <a href="VariablesFromFirstPost.html">VariablesFromFirstPost</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="VariablesFromFirstPost#check"><a href="VariablesFromFirstPost.html#check">check</a></li>

                <li data-name="VariablesFromFirstPost#escape"><a href="VariablesFromFirstPost.html#escape">escape</a></li>

                <li data-name="VariablesFromFirstPost#get"><a href="VariablesFromFirstPost.html#get">get</a></li>

                <li data-name="VariablesFromFirstPost#get_language"><a href="VariablesFromFirstPost.html#get_language">get_language</a></li>

                <li data-name="VariablesFromFirstPost#parse"><a href="VariablesFromFirstPost.html#parse">parse</a></li>

                <li data-name="VariablesFromFirstPost#refresh"><a href="VariablesFromFirstPost.html#refresh">refresh</a></li>

                <li data-name="VariablesFromFirstPost#resolve"><a href="VariablesFromFirstPost.html#resolve">resolve</a></li>

                <li data-name="VariablesFromFirstPost#set_namespaces"><a href="VariablesFromFirstPost.html#set_namespaces">set_namespaces</a></li>

                <li data-name="VariablesFromFirstPost#update_cache"><a href="VariablesFromFirstPost.html#update_cache">update_cache</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="VariablesFromForum">
            <span class="title">
                <a href="VariablesFromForum.html">VariablesFromForum</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="VariablesFromForum#check"><a href="VariablesFromForum.html#check">check</a></li>

                <li data-name="VariablesFromForum#escape"><a href="VariablesFromForum.html#escape">escape</a></li>

                <li data-name="VariablesFromForum#get"><a href="VariablesFromForum.html#get">get</a></li>

                <li data-name="VariablesFromForum#get_language"><a href="VariablesFromForum.html#get_language">get_language</a></li>

                <li data-name="VariablesFromForum#parse"><a href="VariablesFromForum.html#parse">parse</a></li>

                <li data-name="VariablesFromForum#refresh"><a href="VariablesFromForum.html#refresh">refresh</a></li>

                <li data-name="VariablesFromForum#refresh_thread"><a href="VariablesFromForum.html#refresh_thread">refresh_thread</a></li>

                <li data-name="VariablesFromForum#resolve"><a href="VariablesFromForum.html#resolve">resolve</a></li>

                <li data-name="VariablesFromForum#serialise_thread"><a href="VariablesFromForum.html#serialise_thread">serialise_thread</a></li>

                <li data-name="VariablesFromForum#set_namespaces"><a href="VariablesFromForum.html#set_namespaces">set_namespaces</a></li>

                <li data-name="VariablesFromForum#update_cache"><a href="VariablesFromForum.html#update_cache">update_cache</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="VBulletin">
            <span class="title">
                <a href="VBulletin.html">VBulletin</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="VBulletin.iframe_callbacks"><a href="VBulletin.html#.iframe_callbacks">iframe_callbacks</a></li>

                <li data-name="VBulletin#_add_standard_data"><a href="VBulletin.html#_add_standard_data">_add_standard_data</a></li>

                <li data-name="VBulletin#activity"><a href="VBulletin.html#activity">activity</a></li>

                <li data-name="VBulletin#attachments_delete"><a href="VBulletin.html#attachments_delete">attachments_delete</a></li>

                <li data-name="VBulletin#bbcode_html"><a href="VBulletin.html#bbcode_html">bbcode_html</a></li>

                <li data-name="VBulletin#bbcode_html_newthread"><a href="VBulletin.html#bbcode_html_newthread">bbcode_html_newthread</a></li>

                <li data-name="VBulletin#build_url"><a href="VBulletin.html#build_url">build_url</a></li>

                <li data-name="VBulletin#config"><a href="VBulletin.html#config">config</a></li>

                <li data-name="VBulletin#css_add"><a href="VBulletin.html#css_add">css_add</a></li>

                <li data-name="VBulletin#css_keys"><a href="VBulletin.html#css_keys">css_keys</a></li>

                <li data-name="VBulletin#detect_post_error"><a href="VBulletin.html#detect_post_error">detect_post_error</a></li>

                <li data-name="VBulletin#editor_get"><a href="VBulletin.html#editor_get">editor_get</a></li>

                <li data-name="VBulletin#editor_set"><a href="VBulletin.html#editor_set">editor_set</a></li>

                <li data-name="VBulletin#fix_url"><a href="VBulletin.html#fix_url">fix_url</a></li>

                <li data-name="VBulletin#folder_pms"><a href="VBulletin.html#folder_pms">folder_pms</a></li>

                <li data-name="VBulletin#forum_metadata"><a href="VBulletin.html#forum_metadata">forum_metadata</a></li>

                <li data-name="VBulletin#forum_threads"><a href="VBulletin.html#forum_threads">forum_threads</a></li>

                <li data-name="VBulletin#forums"><a href="VBulletin.html#forums">forums</a></li>

                <li data-name="VBulletin#get"><a href="VBulletin.html#get">get</a></li>

                <li data-name="VBulletin#get_pages"><a href="VBulletin.html#get_pages">get_pages</a></li>

                <li data-name="VBulletin#get_posts"><a href="VBulletin.html#get_posts">get_posts</a></li>

                <li data-name="VBulletin#infraction_give"><a href="VBulletin.html#infraction_give">infraction_give</a></li>

                <li data-name="VBulletin#infraction_give_custom"><a href="VBulletin.html#infraction_give_custom">infraction_give_custom</a></li>

                <li data-name="VBulletin#infraction_ids"><a href="VBulletin.html#infraction_ids">infraction_ids</a></li>

                <li data-name="VBulletin#ip_users"><a href="VBulletin.html#ip_users">ip_users</a></li>

                <li data-name="VBulletin#login"><a href="VBulletin.html#login">login</a></li>

                <li data-name="VBulletin#moderation_page"><a href="VBulletin.html#moderation_page">moderation_page</a></li>

                <li data-name="VBulletin#on_posts_modified"><a href="VBulletin.html#on_posts_modified">on_posts_modified</a></li>

                <li data-name="VBulletin#parse"><a href="VBulletin.html#parse">parse</a></li>

                <li data-name="VBulletin#parse_post"><a href="VBulletin.html#parse_post">parse_post</a></li>

                <li data-name="VBulletin#ping"><a href="VBulletin.html#ping">ping</a></li>

                <li data-name="VBulletin#pm_send"><a href="VBulletin.html#pm_send">pm_send</a></li>

                <li data-name="VBulletin#post"><a href="VBulletin.html#post">post</a></li>

                <li data-name="VBulletin#post_create"><a href="VBulletin.html#post_create">post_create</a></li>

                <li data-name="VBulletin#post_delete"><a href="VBulletin.html#post_delete">post_delete</a></li>

                <li data-name="VBulletin#post_edit"><a href="VBulletin.html#post_edit">post_edit</a></li>

                <li data-name="VBulletin#post_info"><a href="VBulletin.html#post_info">post_info</a></li>

                <li data-name="VBulletin#post_report"><a href="VBulletin.html#post_report">post_report</a></li>

                <li data-name="VBulletin#post_summary"><a href="VBulletin.html#post_summary">post_summary</a></li>

                <li data-name="VBulletin#posts_moderated"><a href="VBulletin.html#posts_moderated">posts_moderated</a></li>

                <li data-name="VBulletin#posts_move"><a href="VBulletin.html#posts_move">posts_move</a></li>

                <li data-name="VBulletin#process_posts"><a href="VBulletin.html#process_posts">process_posts</a></li>

                <li data-name="VBulletin#quotes_process"><a href="VBulletin.html#quotes_process">quotes_process</a></li>

                <li data-name="VBulletin#redirect_modcp_ipsearch"><a href="VBulletin.html#redirect_modcp_ipsearch">redirect_modcp_ipsearch</a></li>

                <li data-name="VBulletin#server_stats"><a href="VBulletin.html#server_stats">server_stats</a></li>

                <li data-name="VBulletin#spammer_delete"><a href="VBulletin.html#spammer_delete">spammer_delete</a></li>

                <li data-name="VBulletin#stringify"><a href="VBulletin.html#stringify">stringify</a></li>

                <li data-name="VBulletin#thread_bump"><a href="VBulletin.html#thread_bump">thread_bump</a></li>

                <li data-name="VBulletin#thread_create"><a href="VBulletin.html#thread_create">thread_create</a></li>

                <li data-name="VBulletin#thread_debump"><a href="VBulletin.html#thread_debump">thread_debump</a></li>

                <li data-name="VBulletin#thread_delete"><a href="VBulletin.html#thread_delete">thread_delete</a></li>

                <li data-name="VBulletin#thread_edit"><a href="VBulletin.html#thread_edit">thread_edit</a></li>

                <li data-name="VBulletin#thread_merge"><a href="VBulletin.html#thread_merge">thread_merge</a></li>

                <li data-name="VBulletin#thread_metadata"><a href="VBulletin.html#thread_metadata">thread_metadata</a></li>

                <li data-name="VBulletin#thread_move"><a href="VBulletin.html#thread_move">thread_move</a></li>

                <li data-name="VBulletin#thread_openclose"><a href="VBulletin.html#thread_openclose">thread_openclose</a></li>

                <li data-name="VBulletin#thread_posts"><a href="VBulletin.html#thread_posts">thread_posts</a></li>

                <li data-name="VBulletin#thread_reply"><a href="VBulletin.html#thread_reply">thread_reply</a></li>

                <li data-name="VBulletin#thread_title"><a href="VBulletin.html#thread_title">thread_title</a></li>

                <li data-name="VBulletin#thread_whoposted"><a href="VBulletin.html#thread_whoposted">thread_whoposted</a></li>

                <li data-name="VBulletin#threads_complete"><a href="VBulletin.html#threads_complete">threads_complete</a></li>

                <li data-name="VBulletin#threads_recent"><a href="VBulletin.html#threads_recent">threads_recent</a></li>

                <li data-name="VBulletin#url_decode"><a href="VBulletin.html#url_decode">url_decode</a></li>

                <li data-name="VBulletin#user_ban"><a href="VBulletin.html#user_ban">user_ban</a></li>

                <li data-name="VBulletin#user_current"><a href="VBulletin.html#user_current">user_current</a></li>

                <li data-name="VBulletin#user_info"><a href="VBulletin.html#user_info">user_info</a></li>

                <li data-name="VBulletin#user_ips"><a href="VBulletin.html#user_ips">user_ips</a></li>

                <li data-name="VBulletin#user_moderation_info"><a href="VBulletin.html#user_moderation_info">user_moderation_info</a></li>

                <li data-name="VBulletin#user_overlapping"><a href="VBulletin.html#user_overlapping">user_overlapping</a></li>

                <li data-name="VBulletin#user_signature_get"><a href="VBulletin.html#user_signature_get">user_signature_get</a></li>

                <li data-name="VBulletin#user_signature_set"><a href="VBulletin.html#user_signature_set">user_signature_set</a></li>

                <li data-name="VBulletin#usernote_add"><a href="VBulletin.html#usernote_add">usernote_add</a></li>

                <li data-name="VBulletin#usernote_edit"><a href="VBulletin.html#usernote_edit">usernote_edit</a></li>

                <li data-name="VBulletin#usernote_info"><a href="VBulletin.html#usernote_info">usernote_info</a></li>

                <li data-name="VBulletin#users_complete"><a href="VBulletin.html#users_complete">users_complete</a></li>

                <li data-name="VBulletin#users_list_new"><a href="VBulletin.html#users_list_new">users_list_new</a></li>

                <li data-name="VBulletin#when"><a href="VBulletin.html#when">when</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="VbulletinPopupMenu">
            <span class="title">
                <a href="VbulletinPopupMenu.html">VbulletinPopupMenu</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="VbulletinPopupMenu#val"><a href="VbulletinPopupMenu.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Violations">
            <span class="title">
                <a href="Violations.html">Violations</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="Violations#refresh"><a href="Violations.html#refresh">refresh</a></li>

                <li data-name="Violations#update_cache"><a href="Violations.html#update_cache">update_cache</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Widget">
            <span class="title">
                <a href="Widget.html">Widget</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="Widget#val"><a href="Widget.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="src_dashboard.js.html">Source: src/dashboard.js</h1>




    <section>
        <article>
            <pre class="prettyprint source "><code>/**
 * @file Bulletin Board Dashboard
 * @author Andrew Sayers
 * @description Display continuously-updated information about a bulletin board
 */

// notification thread page
// communication with notification tab

/**
 * @summary Dashboard displaying miscellaneous real-time information
 * @constructor
 * @extends Cacheable
 * @example
 * var dashboard = new Dashboard({
 *     cache             : { ... }, // values previously passed to cache, or an empty object on first run
 *     cache_updater     : function(cache) { ... }, // save object to pass in next time
 *     container         : $(...), // element containing dashboard content
 *     interval          : 60000   // each monitor will be polled once per this many milliseconds
 * });
 *
 * @description
 * Dashboards display information about the bulletin board you're on.
 * Currently supported: 'thread', 'forum', 'mod_queue' and 'newbies'.
 *
 * Most configuration is done through the HTML in the "container" parameter.
 * Elements with class "dashboard-header" have the dashboard header inserted.
 * Elements with class "dashboard-section" are set to dashboard sections (based on their "data-monitor" parameter)
 * Elements with class "dashboard-body" within "dashboard-section" receive the contents of the section
 * Elements with class "dashboard-refresh" will trigger a refresh of the current section when clicked
 * Elements with class "dashboard-done" are treated as buttons to (un)mark a section done
 *
 * Section elements have classes "loading", "empty", "nonempty", "done" and "undone" set as appropriate.
 * Section elements can have a 'bb' data item if they need to access a different bulletin board
 */
function Dashboard( args ) {

    Cacheable.call( this, args );
    this.bb = args.bb;

    /*
     * INITIALISE HEADER
     */

    args.container.find('.dashboard-header').each(function() {

        /*
         * If you temporarily disable the extension, all running intervals will be cancelled.
         * This block uses a CSS animation to warn the user when that happens.
         */

        $("head").append(
            "&lt;style type='text/css'>" +
                '@-webkit-keyframes dashboard-warning { 0%, 99% {opacity: 0; visibility: hidden} 100% {opacity: 1; visibility: visible} }' +
                        '@keyframes dashboard-warning { 0%, 99% {opacity: 0; visibility: hidden} 100% {opacity: 1; visibility: visible} }' +
                '.dashboard-warning' +
                           '{ animation: dashboard-warning ' + Math.ceil(args.interval / 500) + 's;' +
                    ' -webkit-animation: dashboard-warning ' + Math.ceil(args.interval / 500) + 's;' +
                    'float: none ! important; color: red}' +
            "&lt;/style>"
        );

        var warning_container =
            $('&lt;div>Dashboard&lt;span class="dashboard-warning">&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;WARNING: dashboard has stopped.  Please refresh the page&lt;/span>&lt;/div>')
            .appendTo(this);

        setInterval(function() {
            warning_container.find('.dashboard-warning').replaceWith( warning_container.find('.dashboard-warning').clone() );
        }, args.interval );

    });

    /*
     * INITIALISE SECTIONS
     */

    var sections = args.container.find('.dashboard-section');

    var interval = args.interval;
    var tick = interval / sections.length, tick_count = 0;

    var dashboard = this;

    sections.each(function() {

        var container = $(this), monitor = container.data('monitor'), bb = container.data('bb') || dashboard.bb;

        if ( !monitor || !Dashboard.prototype.hasOwnProperty(monitor+'_refresh') ) {
            console.log("Ignoring unknown dashboard monitor: " + monitor);
            return;
        }

        // initialise "done" buttons:
        var done_time = 0;
        container.find('.dashboard-done').click(function(event) {
            done_time = new Date().getTime();

            dashboard[monitor+'_done']( bb, container, container.hasClass('done') );
            dashboard.update_cache();

            container.toggleClass('done undone');
            event.preventDefault();
        });

        // empty the container in a non-undoable way:
        container.data('empty', function(event) {
            done_time = new Date().getTime();

            dashboard[monitor+'_done']( bb, container, container.hasClass('done') );
            dashboard.update_cache();

            container.removeClass('undone nonempty').addClass( 'done empty' );
        });

        $(container).on( 'mouseover click', function() { done_time = new Date().getTime() });

        function refresh(force) {
            // don't change anything while people are looking:
            if ( force || ( done_time &lt; new Date().getTime() - interval/2 &amp;&amp; ! container.is(':hover') ) ) {

                done_time = new Date().getTime();
                var old_class = container.attr( 'class' );

                // set the section's state to look right while loading:
                if ( container.hasClass('done') ) container.addClass('empty');
                container.removeClass( 'nonempty done undone' ).addClass( 'loading' );

                dashboard[monitor+'_refresh'](bb, container).then(function(contents) {
                    container.removeClass( 'empty loading' )
                    if ( typeof(contents) == 'undefined' ) {
                        container.attr( 'class', old_class );
                    } else {
                        container.find('.dashboard-body').empty().append(contents);
                        container.addClass(
                            contents.length
                            ? 'nonempty undone'
                            :    'empty'
                        );
                    }
                });

            }
        }

        // initialise "refresh" buttons:
        container.find('a.dashboard-refresh').click(function(event) {
            refresh(true);
            event.preventDefault();
        });

        // initialise the section:
        container.addClass( 'empty' );
        container.data( 'signature', '' );
        var promise = Dashboard.prototype.hasOwnProperty(monitor+'_init') ? dashboard[monitor+'_init'](bb, container) : false;
        if ( promise ) {
            done_time = new Date().getTime(); + Math.pow( 10, 10 ); // disable refreshes until initialised
            promise.then(function() { refresh(true) });
        } else {
            refresh(true);
        }

        // fire the refresh callback once per interval,
        // with sections spaced out evenly across the interval:
        setTimeout(function() { setInterval( refresh, interval ) }, tick * tick_count++ );

    });

}

Dashboard.prototype = Object.create(Cacheable.prototype, {
    bb: { writable: true, configurable: false },
});
Dashboard.prototype.constructor = Dashboard;

/**
 * @summary show notifications registered by the dashboard
 */
function show_dashboard_notifications(cache) {
}


function add_notification( title, notification_html, body_html ) {
}

/*
 * THREAD MONITORING
 */

Dashboard.prototype.thread_init = function(bb, container) {

    if ( !this.cache['thread-done-'+container.data('thread')] ) {
        var dashboard = this;
        var thread_id = container.data('thread');
        return $.get(bb.url_for.thread_show({ thread_id: thread_id, goto: 'newpost' })).then(function(html) {
            // first run - get highest post ID:
            return bb.thread_posts( thread_id, html ).then(function(posts) {
                dashboard.cache['thread-done-'+thread_id] = posts[posts.length-1].post_id;
                dashboard.update_cache();
            });
        });
    }

}

Dashboard.prototype.thread_done = function(bb, container, undo) {
    this.cache['thread-done-'+container.data('thread')] = container.data( undo ? 'undone_id' : 'done_id' );
}

Dashboard.prototype.thread_refresh = function(bb, container) {

    var dashboard = this, thread_id = container.data( 'thread' );

    return bb.thread_whoposted(thread_id).then(function(who_posted) {

        // thread pages are very expensive to load - we use the "who posted" page as a cheaper way to generate a signature:
        var signature = who_posted.total + ',' + who_posted.users.map(function(user) { return user.post_count }).join();

        if ( container.data('signature') == signature ) return;

        var read_post_id = dashboard.cache['thread-done-'+thread_id];
        container.data( 'undone_id', read_post_id );

        return $.get(bb.url_for.thread_show({ thread_id: thread_id, post_id: read_post_id })).then(function(html) {
            return bb.thread_posts( thread_id, html ).then(function(posts) {

                container.data( 'signature', signature );
                container.data( 'done_id', posts[posts.length-1].post_id );

                posts = posts.filter(function(post) { return post.post_id > read_post_id });
                if ( container.data('filter') ) posts = container.data('filter')(posts);

                return posts.map(function(post) { return post.container_element });

            });
        });

    });

}

/*
 * FORUM MONITORING
 */

Dashboard.prototype.forum_done = function(bb, container, undo) {
    this.cache['forum-done-'+container.data('forum')] = container.data( undo ? 'undone_id' : 'done_id' );
}

Dashboard.prototype.forum_refresh = function(bb, container) {

    var dashboard = this, forum_id = container.data('forum');

    // forum pages are less expensive than thread pages, so we don't bother caching them:
    var read_post_id = dashboard.cache['forum-done-'+forum_id];

    return bb.forum_threads(forum_id, true).then(function(threads) {

        var min_thread_id = container.data('min_thread_id') || 0;
        var last_post_ids = threads.map(function(thread) { return thread.last_post_id });

        // ignore if unchanged
        if ( dashboard.cache['forum-min-thread-'+forum_id] == min_thread_id &amp;&amp; container.data('signature') == last_post_ids.join() ) return;
        container.data( 'signature',  last_post_ids.join() );

        container.data(   'done_id', Math.max.apply( Math, last_post_ids ) );
        container.data( 'undone_id', read_post_id );
        dashboard.cache['forum-min-thread-'+forum_id] = min_thread_id;

        if ( read_post_id ) threads = threads.filter(function(thread) { return thread.last_post_id > read_post_id });
        if ( min_thread_id ) threads = threads.filter(function(thread) { return thread.thread_id >= min_thread_id });
        if ( container.data('filter') ) threads = container.data('filter')(threads);

        return threads.map(function(thread) { return thread.container_element });

    });
}

/*
 * RECENT ACTIVITY MONITORING
 */

Dashboard.prototype.activity_done = function(bb, container, undo) {
    this.cache['activity-done'] = container.data( undo ? 'undone_id' : 'done_id' );
}

Dashboard.prototype.activity_refresh = function(bb, container) {

    var dashboard = this, activity_id = container.data('activity');

    // activity pages are less expensive than thread pages, so we don't bother caching them:
    var max_read = dashboard.cache['activity-done'] || [ 0, 0, 0 ];
    if ( !$.isArray(max_read) ) max_read = [ max_read, 0, 0 ]; // upgrade old values, can be deleted after 2015-10-21

    return bb.activity(max_read[0]+1, max_read[1]+1).then(function(activity_data) {

        container.data( 'undone_id', max_read );
        container.data(   'done_id', [
            Math.max( max_read[0], activity_data.max_date      ),
            Math.max( max_read[1], activity_data.max_post_id   ),
            Math.max( max_read[2], activity_data.max_thread_id )
        ]);

        var posts = activity_data.posts;

        // Activity filter may not remove all posts, so we have to filter ourselves:
        posts = posts.filter(function(post) { return post.post_id ? post.post_id > max_read[1] : post.thread_id > max_read[2] });

        if ( container.data('filter') ) posts = container.data('filter')(posts);

        return posts.map(function(post) { return post.container_element });

    });

}

/*
 * NEWBIE MONITORING
 */

Dashboard.prototype.newbies_init = function(bb, container) {

    var dashboard = this;

    container.data( 'template', container.find( '.template' ).removeClass( 'template' ).detach() );

    if ( (dashboard.cache['newbies-data-version']||0) != 2 ) {
        delete dashboard.cache['newbies-next'];
        dashboard.cache['newbies-data-version'] = 2;
    }

    if ( !dashboard.cache['newbies-next'] ) {
        dashboard.cache['newbies-current'] = [];
        if ( container.data('min_user_id') ) {
            dashboard.cache['newbies-next'] = container.data('min_user_id') + 1;
            dashboard.update_cache();
        } else {
            // first run - get min_user_id if possible, else set it to the next user ID that will be created:
            return bb.users_list_new()
                .then(function(users) {
                    dashboard.cache['newbies-next'] = users[0].user_id + 1;
                    dashboard.update_cache();
                });
        }
    }

}

Dashboard.prototype.newbies_done = function(bb, container, undo) {
    this.cache['newbies-current'] = undo ? container.data( 'newbies-current' ) : [];
}

Dashboard.prototype.newbies_refresh = function(bb, container) {

    var dashboard = this;

    var current_users = dashboard.cache['newbies-current'];

    // approximate amount of time to spend downloading new user accounts:
    var end_time = new Date().getTime() + 10000;
    var user_count = 0;

    // get a new user account (called recursively until the time limit is reached):
    function get_user(user_info, users) {

        if ( user_info ) {
            ++user_count;

            return $.when.apply( $, // get user info about suspected duplicate accounts
                users.map(function(user) {
                    return bb.user_info(user.user_id).then(function(info) {
                        user.suspiciousness = (
                            ( info.is_banned        &amp;&amp; 8 ) | // same IP as a currently-banned user - DODGEY!
                            ( info.infraction_count &amp;&amp; 4 ) | // same IP as an infracted user - probably dodgey
                            ( info.   warning_count &amp;&amp; 2 ) | // same IP as a user with a warning - might well be dodgey
                                                       1     // same IP as another user - could be dodgey
                        );
                        user.info = info;
                    });
                }).concat(
                    users.map(function(user) {
                        return bb.user_moderation_info(user.user_id).then(function(info) {
                            user.moderation_info = info;
                        });
                    })
                )
            ).then(function() {
                if ( users.length ) {
                    users.sort(function(a,b) { return b.suspiciousness - a.suspiciousness || a.username.localeCompare(b.username) });
                    user_info.suspiciousness = users[0].suspiciousness;
                } else {
                    user_info.suspiciousness = 0;
                }

                user_info.suspected_duplicates = users;
                ++dashboard.cache['newbies-next'];
                current_users.push(user_info);
                dashboard.update_cache();

                if ( new Date().getTime() &lt; end_time ) {
                    // get another account
                    return $.when(
                        bb.user_moderation_info(           dashboard.cache['newbies-next']  ),
                        bb.user_overlapping    ({ user_id: dashboard.cache['newbies-next'] })
                    ).then(get_user);
                }
            });

        }

    };

    function get_newbies(user_id) {

        if ( dashboard.cache['newbies-next'] &lt; user_id )
            dashboard.cache['newbies-next'] = user_id;

        current_users = current_users.filter(function(user) {
            if ( user.user_id >= user_id ) return true
            container.data( 'signature', false );
            return false;
        });

        return $.when(
            bb.user_moderation_info(           dashboard.cache['newbies-next']  ),
            bb.user_overlapping    ({ user_id: dashboard.cache['newbies-next'] })
        ).then(get_user).then(function() {

            // If the section has already been initialised and there are no new users, return unchanged:
            if ( container.data( 'signature' ) &amp;&amp; !user_count ) return;
            container.data( 'signature', true );

            current_users.sort(function (a,b) {
                if ( a.suspected_duplicates.filter(function(user) { return user.user_id == b.user_id }).length ) {
                    // groups of duplicate users are sorted by activity time
                    return b.activity_date - a.activity_date;
                } else {
                    return b.suspiciousness - a.suspiciousness || a.username.localeCompare(b.username);
                };
            });

            container.data( 'newbies-current', dashboard.cache['newbies-current'] = current_users );

            dashboard.update_cache();

            var template = container.data( 'template' );

            var users = current_users.map(function(user) {
                return $.extend( { element: template.clone() }, user );
            });

            if ( container.data('filter') ) users = container.data('filter')(users);

            return users.map(function(user) { return user.element });

        });

    }

    return get_newbies( container.data('min_user_id') || 0 );

}

/*
 * POST QUEUE MONITORING
 */

Dashboard.prototype.mod_queue_done = function(bb, container, undo) {
    this.cache['moderated-next-post'  ] = container.data( undo ?   'post-undone' :   'post-done' );
    this.cache['moderated-next-thread'] = container.data( undo ? 'thread-undone' : 'thread-done' );
}

Dashboard.prototype.mod_queue_refresh = function(bb, container) {

    var dashboard = this;

    var read_post_id   = dashboard.cache['moderated-next-post'  ];
    var read_thread_id = dashboard.cache['moderated-next-thread'];

    return bb.posts_moderated().then(function(posts_and_threads) {

        var posts = posts_and_threads.posts, threads = posts_and_threads.threads;

        var signature =
            threads.map(function(thread) { return thread.thread_id }).concat(
             posts.map(function(post  ) { return post  .post_id   })
            ).join();
        if ( signature == container.data( 'signature' ) ) return;
        container.data( 'signature', signature );

        container
            .data(   'post-done',   posts.length ? posts  [posts  .length-1].  post_id : read_post_id   )
            .data( 'thread-done', threads.length ? threads[threads.length-1].thread_id : read_thread_id );

        if ( read_post_id   ) posts   = posts  .filter(function(post  ) { return post  .post_id   > read_post_id   });
        if ( read_thread_id ) threads = threads.filter(function(thread) { return thread.thread_id > read_thread_id });

        return threads.map(function(thread) {
            var ret = $('&lt;tr>&lt;td>&lt;a href="">&lt;/a>&lt;td>&lt;a href="">&lt;/a>&lt;td>&lt;a href="">&lt;/a>&lt;td>&lt;a href="">&lt;/a>&lt;/a>&lt;/tr>');
            var links = ret.find('a');
            links.eq(0).attr('href', bb.url_for. forum_show({  forum_id: thread. forum_id }) ).text( thread.forum_name );
            links.eq(1).attr('href', bb.url_for.thread_show({ thread_id: thread.thread_id }) ).text( thread.thread_title );
            links.eq(2).attr('href', bb.url_for.thread_show({ thread_id: thread.thread_id }) ).text( '(first post)' );
            links.eq(3).attr('href', bb.url_for.  user_show({   user_id: thread.  user_id }) ).text( thread.username );
            return ret;
        }).concat(posts.map(function(post) {
            var ret = $('&lt;tr>&lt;td>&lt;a href="">&lt;/a>&lt;td>&lt;a href="">&lt;td>&lt;a href="">&lt;td>&lt;a href="">&lt;/a>&lt;/a>&lt;/tr>');
            var links = ret.find('a');
            links.eq(0).attr('href', bb.url_for. forum_show({  forum_id: post. forum_id }) ).text( post.forum_name );
            links.eq(1).attr('href', bb.url_for.thread_show({ thread_id: post.thread_id }) ).text( post.thread_title );
            links.eq(2).attr('href', bb.url_for.  post_show({ thread_id: post.thread_id, post_id: post.post_id }) ).text( post.  post_title || '(no title)' );
            links.eq(3).attr('href', bb.url_for.  user_show({   user_id: post.  user_id }) ).text( post.username );
            return ret;
        }));

    });

}

// Some monitors need more than the default initialisation:
Dashboard.prototype.server_stats_init = function(bb, container) {

    function make_chart( name, data, settings ) {
        var chart = new Chart( container.find('.dashboard-server_stats-'+name+' canvas')[0].getContext("2d") );
        var line = chart.Line(data, settings);
        container.find('.dashboard-server_stats-'+name).append(line.generateLegend());
        container.data( name, line );
    }

    if ( !this.cache['server-stats'] ) { // first run
        this.cache['server-stats'] = {
            labels: [],
                one_minute_loadavg: [],
               five_minute_loadavg: [],
            fifteen_minute_loadavg: [],
            members_online: [],
             guests_online: []
        };
    }

    var values = this.cache['server-stats'];

    make_chart(
        'loadavg',
        {
            labels: values.labels.slice(0),
            datasets: [
                {
                    label: "One-minute load average",
                    fillColor: "rgba(220,220,220,0.2)",
                    strokeColor: "#f33",
                    pointColor: "#f33",
                    pointStrokeColor: "#fff",
                    pointHighlightFill: "#fff",
                    pointHighlightStroke: "rgba(220,220,222,1)",
                    data: values.one_minute_loadavg
                },
                {
                    label: "Five-minute load average",
                    fillColor: "rgba(220,220,223,0.2)",
                    strokeColor: "#e88",
                    pointColor: "#e88",
                    pointStrokeColor: "#fff",
                    pointHighlightFill: "#fff",
                    pointHighlightStroke: "rgba(220,220,225,1)",
                    data: values.five_minute_loadavg
                },
                {
                    label: "Fifteen-minute load average",
                    fillColor: "rgba(220,220,226,0.2)",
                    strokeColor: "#daa",
                    pointColor: "#daa",
                    pointStrokeColor: "#fff",
                    pointHighlightFill: "#fff",
                    pointHighlightStroke: "rgba(220,220,228,1)",
                    data: values.fifteen_minute_loadavg
                },
            ]
        },
        {
            bezierCurve: true,
            animation: false,
            scaleOverride: true,
            scaleSteps: 10,
            scaleStepWidth: 0.1,
            scaleStartValue: 0
        }
    );

    make_chart(
        'online',
        {
            labels: values.labels.slice(0),
            datasets: [
                {
                    label: "Members online",
                    fillColor: "rgba(220,220,220,0.2)",
                    strokeColor: "#3f3",
                    pointColor: "#3f3",
                    pointStrokeColor: "#fff",
                    pointHighlightFill: "#fff",
                    pointHighlightStroke: "rgba(220,220,220,1)",
                    data: values.members_online
                },
                {
                    label: "Guests online",
                    fillColor: "rgba(220,220,220,0.2)",
                    strokeColor: "#33f",
                    pointColor: "#33f",
                    pointStrokeColor: "#fff",
                    pointHighlightFill: "#fff",
                    pointHighlightStroke: "rgba(220,220,220,1)",
                    data: values.guests_online
                },
            ]
        },
        {
            bezierCurve: true,
            animation: false,
            scaleBeginAtZero: true
        }
    );

}

Dashboard.prototype.server_stats_done = function(bb, container, undo) {}

// called when it's time to refresh the list:
Dashboard.prototype.server_stats_refresh = function(bb, container) {

    var dashboard = this;

    return this.bb.server_stats().then(function(stats) {

        var time = new Date();

        time =
            time.getHours() + ':' +
            ( time.getMinutes() &lt; 10 ? '0' : '' ) + time.getMinutes() + ':' +
            ( time.getSeconds() &lt; 10 ? '0' : '' ) + time.getSeconds()
        ;

        var values = dashboard.cache['server-stats'];
        values.labels.push( time );
        values.    one_minute_loadavg.push( stats.    one_minute_loadavg );
        values.   five_minute_loadavg.push( stats.   five_minute_loadavg );
        values.fifteen_minute_loadavg.push( stats.fifteen_minute_loadavg );
        values.members_online.push( stats.members_online );
        values. guests_online.push( stats. guests_online );

        var loadavg = container.data('loadavg');
        var online  = container.data('online');

        if ( values.labels.length >= 15 ) {
            loadavg.removeData();
            online .removeData();
            Object.keys(values).forEach(function(key) { values[key].shift() });
        }

        dashboard.update_cache();

        loadavg.addData( [ stats.one_minute_loadavg, stats.five_minute_loadavg, stats.fifteen_minute_loadavg ], time );
        online .addData( [ stats.members_online, stats.guests_online                                         ], time );

    });

}

/*
 * PM FOLDER MONITORING
 */

Dashboard.prototype.folder_init = function(bb, container) {

    if ( !this.cache['folder-done-'+container.data('id')] ) {
        var dashboard = this;
        return this.bb.folder_pms(container.data('folder')).then(function(pms) {
            dashboard.cache['folder-done-'+container.data('id')] = pms.length ? pms[0].pm_id : 0;
            dashboard.update_cache();
        });
    }

}

// called when the user clicks the "done" or "undone" button:
Dashboard.prototype.folder_done = function(bb, container, undo) {
    // update the cache so future calls to refresh() act as if the monitor has been (un)done
    this.cache['folder-done-'+container.data('id')] = container.data( undo ? 'undone_id' : 'done_id' );
}

// called when it's time to refresh the list:
Dashboard.prototype.folder_refresh = function(bb, container) {

    var dashboard = this, folder_id = container.data('id');

    var done_id = dashboard.cache['folder-done-'+folder_id];

    return bb.folder_pms(folder_id).then(function(pms) {

        if ( !pms.length || done_id == pms[0].pm_id ) return;

        container.data( 'undone_id', done_id );
        container.data( 'done_id', pms[0].pm_id );

        pms = pms.filter(function(pm) { return pm.pm_id > done_id });
        if ( container.data('filter') ) pms = container.data('filter')(pms);

        return pms.map(function(pm) { return pm.container_element });

    });

}

/*
 * EXAMPLE MONITORING
 */
// Copy/paste this monitor to make your own monitor
// It will be registered and named automatically based on the function names:

/*

// Some monitors need more than the default initialisation:
Dashboard.prototype.example_init = function(bb, container) {
    // init() can optionally return a Deferred object:
    return $.get(...).then(function(html) {
        // 'signature' is set to '' by default, but you can override it:
        container.data( 'signature', $(html).find('.initial-value') );
    });
}

*/

// called when the user clicks the "done" or "undone" button:
Dashboard.prototype.example_done = function(bb, container, undo) {
    // update the cache so future calls to refresh() act as if the monitor has been (un)done
    this.cache['example-data'] = container.data( undo ? 'undone_id' : 'done_id' );
}

// called when it's time to refresh the list:
Dashboard.prototype.example_refresh = function(bb, container) {

    var dashboard = this, example_id = container.data('example');

    var id = dashboard.cache['example-data'];

    return bb.example(/*...*/).then(function(ret) {

        // return an undefined value to indicate the state hasn't changed:
        if ( container.data('signature') == ret.signature ) return;
        container.data( 'signature',  ret.signature );

        // update stored values after checking signature:
        container.data( 'undone_id', id );
        container.data( 'done_id', ret.id );

        // most monitors have use for some kind of filter:
        if ( id ) ret = ret.filter(function(thread) { return ret.id > id });
        if ( container.data('filter') ) ret = container.data('filter')(ret);

        // return an array (or jQuery container) of elements to populate the body:
        return ret.map(function(thread) { /* ... */ });

    });

}
</code></pre>
        </article>
    </section>








        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-beta1</a> on 31 May 2015
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
