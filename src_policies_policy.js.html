<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: src/policies/policy.js</title>


    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">


    <script>
    var config = {"monospaceLinks":false,"cleverLinks":true,"default":{"outputSourceFiles":true}};
    </script>



</head>
<body>
<div id="wrap" class="clearfix">

<div class="navigation">
    <h3 class="applicationName"><a href="index.html"></a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">

        <li class="item" data-name="AccountHighlighter">
            <span class="title">
                <a href="AccountHighlighter.html">AccountHighlighter</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="AccountHighlighter#highlight"><a href="AccountHighlighter.html#highlight">highlight</a></li>

                <li data-name="AccountHighlighter#highlight_to_element"><a href="AccountHighlighter.html#highlight_to_element">highlight_to_element</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Action">
            <span class="title">
                <a href="Action.html">Action</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="Action#blockers"><a href="Action.html#blockers">blockers</a></li>

                <li data-name="Action#fire"><a href="Action.html#fire">fire</a></li>

                <li data-name="Action#fire_with_journal"><a href="Action.html#fire_with_journal">fire_with_journal</a></li>

                <li data-name="Action#long_description"><a href="Action.html#long_description">long_description</a></li>

                <li data-name="Action#then"><a href="Action.html#then">then</a></li>

                <li data-name="Action#title"><a href="Action.html#title">title</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="ActionWidget">
            <span class="title">
                <a href="ActionWidget.html">ActionWidget</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="ActionWidget#action"><a href="ActionWidget.html#action">action</a></li>

                <li data-name="ActionWidget#reset_value"><a href="ActionWidget.html#reset_value">reset_value</a></li>

                <li data-name="ActionWidget#resolve_value"><a href="ActionWidget.html#resolve_value">resolve_value</a></li>

                <li data-name="ActionWidget#set_value"><a href="ActionWidget.html#set_value">set_value</a></li>

                <li data-name="ActionWidget#update_previous_values"><a href="ActionWidget.html#update_previous_values">update_previous_values</a></li>

                <li data-name="ActionWidget#val"><a href="ActionWidget.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="AvailableUsers">
            <span class="title">
                <a href="AvailableUsers.html">AvailableUsers</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="AvailableUsers#active"><a href="AvailableUsers.html#active">active</a></li>

                <li data-name="AvailableUsers#is_ours"><a href="AvailableUsers.html#is_ours">is_ours</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="BulletinBoard">
            <span class="title">
                <a href="BulletinBoard.html">BulletinBoard</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="BulletinBoard#_add_standard_data"><a href="BulletinBoard.html#_add_standard_data">_add_standard_data</a></li>

                <li data-name="BulletinBoard#build_url"><a href="BulletinBoard.html#build_url">build_url</a></li>

                <li data-name="BulletinBoard#config"><a href="BulletinBoard.html#config">config</a></li>

                <li data-name="BulletinBoard#detect_post_error"><a href="BulletinBoard.html#detect_post_error">detect_post_error</a></li>

                <li data-name="BulletinBoard#fix_url"><a href="BulletinBoard.html#fix_url">fix_url</a></li>

                <li data-name="BulletinBoard#get"><a href="BulletinBoard.html#get">get</a></li>

                <li data-name="BulletinBoard#get_pages"><a href="BulletinBoard.html#get_pages">get_pages</a></li>

                <li data-name="BulletinBoard#get_posts"><a href="BulletinBoard.html#get_posts">get_posts</a></li>

                <li data-name="BulletinBoard#parse"><a href="BulletinBoard.html#parse">parse</a></li>

                <li data-name="BulletinBoard#parse_post"><a href="BulletinBoard.html#parse_post">parse_post</a></li>

                <li data-name="BulletinBoard#ping"><a href="BulletinBoard.html#ping">ping</a></li>

                <li data-name="BulletinBoard#post"><a href="BulletinBoard.html#post">post</a></li>

                <li data-name="BulletinBoard#process_posts"><a href="BulletinBoard.html#process_posts">process_posts</a></li>

                <li data-name="BulletinBoard#quotes_process"><a href="BulletinBoard.html#quotes_process">quotes_process</a></li>

                <li data-name="BulletinBoard#stringify"><a href="BulletinBoard.html#stringify">stringify</a></li>

                <li data-name="BulletinBoard#thread_posts"><a href="BulletinBoard.html#thread_posts">thread_posts</a></li>

                <li data-name="BulletinBoard#when"><a href="BulletinBoard.html#when">when</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Cacheable">
            <span class="title">
                <a href="Cacheable.html">Cacheable</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="Cacheable#refresh"><a href="Cacheable.html#refresh">refresh</a></li>

                <li data-name="Cacheable#update_cache"><a href="Cacheable.html#update_cache">update_cache</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Dashboard">
            <span class="title">
                <a href="Dashboard.html">Dashboard</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="Dashboard#refresh"><a href="Dashboard.html#refresh">refresh</a></li>

                <li data-name="Dashboard#update_cache"><a href="Dashboard.html#update_cache">update_cache</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Deadline">
            <span class="title">
                <a href="Deadline.html">Deadline</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="Deadline#action"><a href="Deadline.html#action">action</a></li>

                <li data-name="Deadline#reset_value"><a href="Deadline.html#reset_value">reset_value</a></li>

                <li data-name="Deadline#resolve_value"><a href="Deadline.html#resolve_value">resolve_value</a></li>

                <li data-name="Deadline#set_value"><a href="Deadline.html#set_value">set_value</a></li>

                <li data-name="Deadline#update_previous_values"><a href="Deadline.html#update_previous_values">update_previous_values</a></li>

                <li data-name="Deadline#val"><a href="Deadline.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="DuplicateAccountList">
            <span class="title">
                <a href="DuplicateAccountList.html">DuplicateAccountList</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="DuplicateAccountList#val"><a href="DuplicateAccountList.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="DuplicateAccountPolicy">
            <span class="title">
                <a href="DuplicateAccountPolicy.html">DuplicateAccountPolicy</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="DuplicateAccountPolicy#_Single">
            <span class="title">
                <a href="DuplicateAccountPolicy__Single.html">DuplicateAccountPolicy#_Single</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="ExtraPost">
            <span class="title">
                <a href="ExtraPost.html">ExtraPost</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="ExtraPost#action"><a href="ExtraPost.html#action">action</a></li>

                <li data-name="ExtraPost#reset_value"><a href="ExtraPost.html#reset_value">reset_value</a></li>

                <li data-name="ExtraPost#resolve_value"><a href="ExtraPost.html#resolve_value">resolve_value</a></li>

                <li data-name="ExtraPost#set_value"><a href="ExtraPost.html#set_value">set_value</a></li>

                <li data-name="ExtraPost#update_previous_values"><a href="ExtraPost.html#update_previous_values">update_previous_values</a></li>

                <li data-name="ExtraPost#val"><a href="ExtraPost.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Help">
            <span class="title">
                <a href="Help.html">Help</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="Help#val"><a href="Help.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="InappropriateUsernamePolicy">
            <span class="title">
                <a href="InappropriateUsernamePolicy.html">InappropriateUsernamePolicy</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="IPAddressReport">
            <span class="title">
                <a href="IPAddressReport.html">IPAddressReport</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="IPAddressReport#action"><a href="IPAddressReport.html#action">action</a></li>

                <li data-name="IPAddressReport#bbcode"><a href="IPAddressReport.html#bbcode">bbcode</a></li>

                <li data-name="IPAddressReport#cache_timeout"><a href="IPAddressReport.html#cache_timeout">cache_timeout</a></li>

                <li data-name="IPAddressReport#html"><a href="IPAddressReport.html#html">html</a></li>

                <li data-name="IPAddressReport#users"><a href="IPAddressReport.html#users">users</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="MiscellaneousCache">
            <span class="title">
                <a href="MiscellaneousCache.html">MiscellaneousCache</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="MiscellaneousCache#refresh"><a href="MiscellaneousCache.html#refresh">refresh</a></li>

                <li data-name="MiscellaneousCache#update_cache"><a href="MiscellaneousCache.html#update_cache">update_cache</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="NotificationSelector">
            <span class="title">
                <a href="NotificationSelector.html">NotificationSelector</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="NotificationSelector#action"><a href="NotificationSelector.html#action">action</a></li>

                <li data-name="NotificationSelector#add_known_keys"><a href="NotificationSelector.html#add_known_keys">add_known_keys</a></li>

                <li data-name="NotificationSelector#extra_block"><a href="NotificationSelector.html#extra_block">extra_block</a></li>

                <li data-name="NotificationSelector#mode"><a href="NotificationSelector.html#mode">mode</a></li>

                <li data-name="NotificationSelector#mode_switcher"><a href="NotificationSelector.html#mode_switcher">mode_switcher</a></li>

                <li data-name="NotificationSelector#reset_value"><a href="NotificationSelector.html#reset_value">reset_value</a></li>

                <li data-name="NotificationSelector#resolve_value"><a href="NotificationSelector.html#resolve_value">resolve_value</a></li>

                <li data-name="NotificationSelector#set_value"><a href="NotificationSelector.html#set_value">set_value</a></li>

                <li data-name="NotificationSelector#update_previous_values"><a href="NotificationSelector.html#update_previous_values">update_previous_values</a></li>

                <li data-name="NotificationSelector#val"><a href="NotificationSelector.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Policy">
            <span class="title">
                <a href="Policy.html">Policy</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="Policy#_build_keys"><a href="Policy.html#_build_keys">_build_keys</a></li>

                <li data-name="Policy#_build_widget_args"><a href="Policy.html#_build_widget_args">_build_widget_args</a></li>

                <li data-name="Policy#check"><a href="Policy.html#check">check</a></li>

                <li data-name="Policy#close_thread"><a href="Policy.html#close_thread">close_thread</a></li>

                <li data-name="Policy#deadline_action"><a href="Policy.html#deadline_action">deadline_action</a></li>

                <li data-name="Policy#deadline_args"><a href="Policy.html#deadline_args">deadline_args</a></li>

                <li data-name="Policy#duplicate_account_list_args"><a href="Policy.html#duplicate_account_list_args">duplicate_account_list_args</a></li>

                <li data-name="Policy#extra_post_action"><a href="Policy.html#extra_post_action">extra_post_action</a></li>

                <li data-name="Policy#extra_post_args"><a href="Policy.html#extra_post_args">extra_post_args</a></li>

                <li data-name="Policy#get"><a href="Policy.html#get">get</a></li>

                <li data-name="Policy#keys"><a href="Policy.html#keys">keys</a></li>

                <li data-name="Policy#notification_selector_action"><a href="Policy.html#notification_selector_action">notification_selector_action</a></li>

                <li data-name="Policy#notification_selector_args"><a href="Policy.html#notification_selector_args">notification_selector_args</a></li>

                <li data-name="Policy#resolve"><a href="Policy.html#resolve">resolve</a></li>

                <li data-name="Policy#resolve_post"><a href="Policy.html#resolve_post">resolve_post</a></li>

                <li data-name="Policy#severity_slider_args"><a href="Policy.html#severity_slider_args">severity_slider_args</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="RecentList">
            <span class="title">
                <a href="RecentList.html">RecentList</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="RecentList#get"><a href="RecentList.html#get">get</a></li>

                <li data-name="RecentList#push"><a href="RecentList.html#push">push</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Report">
            <span class="title">
                <a href="Report.html">Report</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="SeveritySlider">
            <span class="title">
                <a href="SeveritySlider.html">SeveritySlider</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="SeveritySlider#val"><a href="SeveritySlider.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="SharedStore">
            <span class="title">
                <a href="SharedStore.html">SharedStore</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="SharedStore#change"><a href="SharedStore.html#change">change</a></li>

                <li data-name="SharedStore#interval_transaction"><a href="SharedStore.html#interval_transaction">interval_transaction</a></li>

                <li data-name="SharedStore#transaction"><a href="SharedStore.html#transaction">transaction</a></li>

                <li data-name="SharedStore#val"><a href="SharedStore.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="ThreadManagementPolicy">
            <span class="title">
                <a href="ThreadManagementPolicy.html">ThreadManagementPolicy</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="ThreadManagementPolicy#unmerge_action"><a href="ThreadManagementPolicy.html#unmerge_action">unmerge_action</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="ThreadTitleSelector">
            <span class="title">
                <a href="ThreadTitleSelector.html">ThreadTitleSelector</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="ThreadTitleSelector#check"><a href="ThreadTitleSelector.html#check">check</a></li>

                <li data-name="ThreadTitleSelector#focus"><a href="ThreadTitleSelector.html#focus">focus</a></li>

                <li data-name="ThreadTitleSelector#val"><a href="ThreadTitleSelector.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Variables">
            <span class="title">
                <a href="Variables.html">Variables</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="Variables#check"><a href="Variables.html#check">check</a></li>

                <li data-name="Variables#escape"><a href="Variables.html#escape">escape</a></li>

                <li data-name="Variables#get"><a href="Variables.html#get">get</a></li>

                <li data-name="Variables#get_language"><a href="Variables.html#get_language">get_language</a></li>

                <li data-name="Variables#parse"><a href="Variables.html#parse">parse</a></li>

                <li data-name="Variables#refresh"><a href="Variables.html#refresh">refresh</a></li>

                <li data-name="Variables#resolve"><a href="Variables.html#resolve">resolve</a></li>

                <li data-name="Variables#set_namespaces"><a href="Variables.html#set_namespaces">set_namespaces</a></li>

                <li data-name="Variables#update_cache"><a href="Variables.html#update_cache">update_cache</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="VariablesFromFirstPost">
            <span class="title">
                <a href="VariablesFromFirstPost.html">VariablesFromFirstPost</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="VariablesFromFirstPost#check"><a href="VariablesFromFirstPost.html#check">check</a></li>

                <li data-name="VariablesFromFirstPost#escape"><a href="VariablesFromFirstPost.html#escape">escape</a></li>

                <li data-name="VariablesFromFirstPost#get"><a href="VariablesFromFirstPost.html#get">get</a></li>

                <li data-name="VariablesFromFirstPost#get_language"><a href="VariablesFromFirstPost.html#get_language">get_language</a></li>

                <li data-name="VariablesFromFirstPost#parse"><a href="VariablesFromFirstPost.html#parse">parse</a></li>

                <li data-name="VariablesFromFirstPost#refresh"><a href="VariablesFromFirstPost.html#refresh">refresh</a></li>

                <li data-name="VariablesFromFirstPost#resolve"><a href="VariablesFromFirstPost.html#resolve">resolve</a></li>

                <li data-name="VariablesFromFirstPost#set_namespaces"><a href="VariablesFromFirstPost.html#set_namespaces">set_namespaces</a></li>

                <li data-name="VariablesFromFirstPost#update_cache"><a href="VariablesFromFirstPost.html#update_cache">update_cache</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="VariablesFromForum">
            <span class="title">
                <a href="VariablesFromForum.html">VariablesFromForum</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="VariablesFromForum#check"><a href="VariablesFromForum.html#check">check</a></li>

                <li data-name="VariablesFromForum#escape"><a href="VariablesFromForum.html#escape">escape</a></li>

                <li data-name="VariablesFromForum#get"><a href="VariablesFromForum.html#get">get</a></li>

                <li data-name="VariablesFromForum#get_language"><a href="VariablesFromForum.html#get_language">get_language</a></li>

                <li data-name="VariablesFromForum#parse"><a href="VariablesFromForum.html#parse">parse</a></li>

                <li data-name="VariablesFromForum#refresh"><a href="VariablesFromForum.html#refresh">refresh</a></li>

                <li data-name="VariablesFromForum#refresh_thread"><a href="VariablesFromForum.html#refresh_thread">refresh_thread</a></li>

                <li data-name="VariablesFromForum#resolve"><a href="VariablesFromForum.html#resolve">resolve</a></li>

                <li data-name="VariablesFromForum#serialise_thread"><a href="VariablesFromForum.html#serialise_thread">serialise_thread</a></li>

                <li data-name="VariablesFromForum#set_namespaces"><a href="VariablesFromForum.html#set_namespaces">set_namespaces</a></li>

                <li data-name="VariablesFromForum#update_cache"><a href="VariablesFromForum.html#update_cache">update_cache</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="VBulletin">
            <span class="title">
                <a href="VBulletin.html">VBulletin</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="VBulletin.iframe_callbacks"><a href="VBulletin.html#.iframe_callbacks">iframe_callbacks</a></li>

                <li data-name="VBulletin#_add_standard_data"><a href="VBulletin.html#_add_standard_data">_add_standard_data</a></li>

                <li data-name="VBulletin#activity"><a href="VBulletin.html#activity">activity</a></li>

                <li data-name="VBulletin#attachments_delete"><a href="VBulletin.html#attachments_delete">attachments_delete</a></li>

                <li data-name="VBulletin#bbcode_html"><a href="VBulletin.html#bbcode_html">bbcode_html</a></li>

                <li data-name="VBulletin#bbcode_html_newthread"><a href="VBulletin.html#bbcode_html_newthread">bbcode_html_newthread</a></li>

                <li data-name="VBulletin#build_url"><a href="VBulletin.html#build_url">build_url</a></li>

                <li data-name="VBulletin#config"><a href="VBulletin.html#config">config</a></li>

                <li data-name="VBulletin#css_add"><a href="VBulletin.html#css_add">css_add</a></li>

                <li data-name="VBulletin#css_keys"><a href="VBulletin.html#css_keys">css_keys</a></li>

                <li data-name="VBulletin#date_parser"><a href="VBulletin.html#date_parser">date_parser</a></li>

                <li data-name="VBulletin#detect_post_error"><a href="VBulletin.html#detect_post_error">detect_post_error</a></li>

                <li data-name="VBulletin#editor_get"><a href="VBulletin.html#editor_get">editor_get</a></li>

                <li data-name="VBulletin#editor_set"><a href="VBulletin.html#editor_set">editor_set</a></li>

                <li data-name="VBulletin#fix_url"><a href="VBulletin.html#fix_url">fix_url</a></li>

                <li data-name="VBulletin#folder_pms"><a href="VBulletin.html#folder_pms">folder_pms</a></li>

                <li data-name="VBulletin#forum_metadata"><a href="VBulletin.html#forum_metadata">forum_metadata</a></li>

                <li data-name="VBulletin#forum_threads"><a href="VBulletin.html#forum_threads">forum_threads</a></li>

                <li data-name="VBulletin#forums"><a href="VBulletin.html#forums">forums</a></li>

                <li data-name="VBulletin#get"><a href="VBulletin.html#get">get</a></li>

                <li data-name="VBulletin#get_pages"><a href="VBulletin.html#get_pages">get_pages</a></li>

                <li data-name="VBulletin#get_posts"><a href="VBulletin.html#get_posts">get_posts</a></li>

                <li data-name="VBulletin#infraction_give"><a href="VBulletin.html#infraction_give">infraction_give</a></li>

                <li data-name="VBulletin#infraction_give_custom"><a href="VBulletin.html#infraction_give_custom">infraction_give_custom</a></li>

                <li data-name="VBulletin#infraction_ids"><a href="VBulletin.html#infraction_ids">infraction_ids</a></li>

                <li data-name="VBulletin#ip_users"><a href="VBulletin.html#ip_users">ip_users</a></li>

                <li data-name="VBulletin#login"><a href="VBulletin.html#login">login</a></li>

                <li data-name="VBulletin#login_auto"><a href="VBulletin.html#login_auto">login_auto</a></li>

                <li data-name="VBulletin#moderation_page"><a href="VBulletin.html#moderation_page">moderation_page</a></li>

                <li data-name="VBulletin#on_posts_modified"><a href="VBulletin.html#on_posts_modified">on_posts_modified</a></li>

                <li data-name="VBulletin#parse"><a href="VBulletin.html#parse">parse</a></li>

                <li data-name="VBulletin#parse_post"><a href="VBulletin.html#parse_post">parse_post</a></li>

                <li data-name="VBulletin#ping"><a href="VBulletin.html#ping">ping</a></li>

                <li data-name="VBulletin#pm_send"><a href="VBulletin.html#pm_send">pm_send</a></li>

                <li data-name="VBulletin#post"><a href="VBulletin.html#post">post</a></li>

                <li data-name="VBulletin#post_create"><a href="VBulletin.html#post_create">post_create</a></li>

                <li data-name="VBulletin#post_delete"><a href="VBulletin.html#post_delete">post_delete</a></li>

                <li data-name="VBulletin#post_edit"><a href="VBulletin.html#post_edit">post_edit</a></li>

                <li data-name="VBulletin#post_info"><a href="VBulletin.html#post_info">post_info</a></li>

                <li data-name="VBulletin#post_report"><a href="VBulletin.html#post_report">post_report</a></li>

                <li data-name="VBulletin#post_summary"><a href="VBulletin.html#post_summary">post_summary</a></li>

                <li data-name="VBulletin#posts_moderated"><a href="VBulletin.html#posts_moderated">posts_moderated</a></li>

                <li data-name="VBulletin#posts_move"><a href="VBulletin.html#posts_move">posts_move</a></li>

                <li data-name="VBulletin#process_posts"><a href="VBulletin.html#process_posts">process_posts</a></li>

                <li data-name="VBulletin#quotes_process"><a href="VBulletin.html#quotes_process">quotes_process</a></li>

                <li data-name="VBulletin#redirect_modcp_ipsearch"><a href="VBulletin.html#redirect_modcp_ipsearch">redirect_modcp_ipsearch</a></li>

                <li data-name="VBulletin#server_stats"><a href="VBulletin.html#server_stats">server_stats</a></li>

                <li data-name="VBulletin#spammer_delete"><a href="VBulletin.html#spammer_delete">spammer_delete</a></li>

                <li data-name="VBulletin#stringify"><a href="VBulletin.html#stringify">stringify</a></li>

                <li data-name="VBulletin#thread_bump"><a href="VBulletin.html#thread_bump">thread_bump</a></li>

                <li data-name="VBulletin#thread_create"><a href="VBulletin.html#thread_create">thread_create</a></li>

                <li data-name="VBulletin#thread_debump"><a href="VBulletin.html#thread_debump">thread_debump</a></li>

                <li data-name="VBulletin#thread_delete"><a href="VBulletin.html#thread_delete">thread_delete</a></li>

                <li data-name="VBulletin#thread_edit"><a href="VBulletin.html#thread_edit">thread_edit</a></li>

                <li data-name="VBulletin#thread_merge"><a href="VBulletin.html#thread_merge">thread_merge</a></li>

                <li data-name="VBulletin#thread_metadata"><a href="VBulletin.html#thread_metadata">thread_metadata</a></li>

                <li data-name="VBulletin#thread_move"><a href="VBulletin.html#thread_move">thread_move</a></li>

                <li data-name="VBulletin#thread_openclose"><a href="VBulletin.html#thread_openclose">thread_openclose</a></li>

                <li data-name="VBulletin#thread_posts"><a href="VBulletin.html#thread_posts">thread_posts</a></li>

                <li data-name="VBulletin#thread_reply"><a href="VBulletin.html#thread_reply">thread_reply</a></li>

                <li data-name="VBulletin#thread_title"><a href="VBulletin.html#thread_title">thread_title</a></li>

                <li data-name="VBulletin#thread_whoposted"><a href="VBulletin.html#thread_whoposted">thread_whoposted</a></li>

                <li data-name="VBulletin#threads_complete"><a href="VBulletin.html#threads_complete">threads_complete</a></li>

                <li data-name="VBulletin#threads_recent"><a href="VBulletin.html#threads_recent">threads_recent</a></li>

                <li data-name="VBulletin#url_decode"><a href="VBulletin.html#url_decode">url_decode</a></li>

                <li data-name="VBulletin#user_ban"><a href="VBulletin.html#user_ban">user_ban</a></li>

                <li data-name="VBulletin#user_current"><a href="VBulletin.html#user_current">user_current</a></li>

                <li data-name="VBulletin#user_info"><a href="VBulletin.html#user_info">user_info</a></li>

                <li data-name="VBulletin#user_ips"><a href="VBulletin.html#user_ips">user_ips</a></li>

                <li data-name="VBulletin#user_moderation_info"><a href="VBulletin.html#user_moderation_info">user_moderation_info</a></li>

                <li data-name="VBulletin#user_notes"><a href="VBulletin.html#user_notes">user_notes</a></li>

                <li data-name="VBulletin#user_overlapping"><a href="VBulletin.html#user_overlapping">user_overlapping</a></li>

                <li data-name="VBulletin#user_posts"><a href="VBulletin.html#user_posts">user_posts</a></li>

                <li data-name="VBulletin#user_signature_get"><a href="VBulletin.html#user_signature_get">user_signature_get</a></li>

                <li data-name="VBulletin#user_signature_set"><a href="VBulletin.html#user_signature_set">user_signature_set</a></li>

                <li data-name="VBulletin#usernote_add"><a href="VBulletin.html#usernote_add">usernote_add</a></li>

                <li data-name="VBulletin#usernote_edit"><a href="VBulletin.html#usernote_edit">usernote_edit</a></li>

                <li data-name="VBulletin#usernote_info"><a href="VBulletin.html#usernote_info">usernote_info</a></li>

                <li data-name="VBulletin#users_complete"><a href="VBulletin.html#users_complete">users_complete</a></li>

                <li data-name="VBulletin#users_list_new"><a href="VBulletin.html#users_list_new">users_list_new</a></li>

                <li data-name="VBulletin#when"><a href="VBulletin.html#when">when</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="VbulletinPopupMenu">
            <span class="title">
                <a href="VbulletinPopupMenu.html">VbulletinPopupMenu</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="VbulletinPopupMenu#val"><a href="VbulletinPopupMenu.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Violations">
            <span class="title">
                <a href="Violations.html">Violations</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="Violations#refresh"><a href="Violations.html#refresh">refresh</a></li>

                <li data-name="Violations#update_cache"><a href="Violations.html#update_cache">update_cache</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

        <li class="item" data-name="Widget">
            <span class="title">
                <a href="Widget.html">Widget</a>

            </span>
            <ul class="members itemMembers">

            </ul>
            <ul class="typedefs itemMembers">

            </ul>
            <ul class="methods itemMembers">

            <span class="subtitle">Methods</span>

                <li data-name="Widget#val"><a href="Widget.html#val">val</a></li>

            </ul>
            <ul class="events itemMembers">

            </ul>
        </li>

    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="src_policies_policy.js.html">Source: src/policies/policy.js</h1>




    <section>
        <article>
            <pre class="prettyprint source "><code>/**
 * @file base class for policies
 * @author Andrew Sayers
 */

/**
 * @summary manage an arbitrary policy
 * @constructor
 * @example
 * var policy = new Policy( namespace, {
 *     // objects:
 *     v : v, // Variables object
 *     bb: bb, // BulletinBoard object
 *     mc: mc, // MiscellaneousCache object
 *     vi: vi, // Violations object
 *     // configuration:
 *     severity_level: { html: 'no action', type: 'none' },
 *     thread_id     : 1234,
 *     thread_desc   : 'thread description',
 *     loading_html  : 'loading, please wait...'
 * });
 */
function Policy(args) {

    this.v  = args.v ;
    this.bb = args.bb;

    this.promise = jQuery.Deferred().resolve().promise();

    this._default_violation = args.mc.violation_groups[0].violations[0].name;

    var levels = this.get(this.name.concat([ 'severity levels' ]));

    if ( levels.text === null )
        this.severity_levels = [{ html: 'no action', type: 'none' }];
    else
        this.severity_levels = args.v.parse(levels.text, {}, 'array of items' ).map(function(level) {
            level = level.value.split(/\s*:\s*/);
            return { html: level[0], type: level[1], icon: level[2] };
        });

    this.severity_level = $.extend( {}, args.severity_level || this.severity_levels[args.severity||0] || this.severity_levels[0] );
    this.default_keys = [];
    this._widget_args  = {
        v               : args.v,
        bb              : args.bb,
        violations      : args.vi,
        namespace       : this._namespace,
        violation_groups: args.mc.violation_groups,
        thread_id       : args.thread_id || this.resolve_post('mod log'),
        thread_desc     : args.thread_desc || 'the mod log',
        loading_html    : args.loading_html
    };
    this.variable_suffix = [this.severity_level.html];

    var policy = this;
    Object.keys(this._extra_post_values).forEach(function(value) {
        if ( !policy._extra_post_values[value].initialised ) {
            policy._extra_post_values[value].initialised = true;
            policy._extra_post_values[value].thread_id = policy.resolve_post( policy._extra_post_values[value].thread_id );
        }
    });

}
Policy.prototype = Object.create(null, {

    v : { writable: true, configurable: false },
    bb: { writable: true, configurable: false },

    promise: { writable: true, configurable: false },

    root_action: { writable: true, configurable: false },
    has_actions: { writable: true, configurable: false },

    _namespace     : { writable: false, configurable: false },
    name           : { writable: false, configurable: false, value: [] },
    _widget_args   : { writable: true, configurable: false },
    default_keys   : { writable: true, configurable: false },
    variable_suffix: { writable: true, configurable: false },

    _default_violation: { writable: true, configurable: false },

    severity_levels: { writable: true, configurable: false },
    severity_level : { writable: true, configurable: false },

    _extra_post_values: {
        writable: false,
        configurable: false,
        value: {
            'chase': {
                visible    : true,
                checked    : true,
                text       : 'Make a note to chase this up',
                thread_id  : 'Moderation Chase-Up Thread', // converted to a number later on
                thread_desc: 'the chase-up thread',
                initialised: false,
                var_prefix : 'chase-up'

            },
            'ip ban': {
                visible    : true,
                checked    : true,
                text       : 'Request that associated IP address(es) be blocked from accessing the site',
                thread_id  : 'IP Ban Request Thread', // converted to a number later on
                thread_desc: 'the IP Ban request thread',
                initialised: false,
                var_prefix : 'IP ban'
            }
        }
    }

});

/*
 * VARIABLE MANAGEMENT FUNCTIONS
 */

/**
 * @summary Build keys to pass to an action
 * @param {Object} keys keys to pass
 * @protected
 */
Policy.prototype.keys = function(keys) {
    return $.extend( this._build_keys([], 'public'), keys );
}

/**
 * @summary Get a frequently used thread or post ID
 * @param {string} name post name
 * @return {string} thread/post ID
 */
Policy.prototype.resolve_post = function(name) { return this.v.resolve('frequently used posts/threads', name ) }
/**
 * @summary Resolve a name in the policy's namespace
 * @param {string|Array.&lt;string>} names     name(s) of variable within the namespace
 * @param {Object.&lt;string,*>=}    keys      keys used to instantiate the variable
 * @param {string=}               parser    parser used for the variable ('string', 'array of items' or 'hash of arrays', default: 'string')
 * @return {string} variable
 */
Policy.prototype.resolve = function(name, keys, parser) { return this.v.resolve(this._namespace, name, keys, parser ) }
/**
 * @summary Resolve a name in the policy's namespace
 * @param {string} name variable name
 * @return {string} variable
 */
Policy.prototype.get = function(name) { return this.v.get(this._namespace, name ) }
/**
 * @summary Check if a name exists in the policy's namespace
 * @param {string} name variable name
 * @return {string} variable
 */
Policy.prototype.check = function(name) { return this.v.check(this._namespace, name ) }

/*
 * SUMMARY BUILDING FUNCTIONS
 */
Policy.prototype.user_link = function(user) {
    if ( !user ) user = this.user;
    return '[URL="' + location.origin + this.bb.url_for.user_show({ user_id: user.user_id }) + '"]' + user.username + '[/URL]'
}

Policy.prototype.severity_icon = function() { return location.origin + this.severity_level.icon }
Policy.prototype.severity_text = function() { return ' (' + this.severity_level.html + ': ' + this.severity_level.type + ')' }

/*
 * WIDGET HELPER FUNCTIONS
 */

/**
 * @summary Build keys to pass to an action
 * @param {Array.&lt;Object>} keys    keys to pass
 * @param {string}         context some keys should only be passed in certain contexts
 * @protected
 * @example
 * var args = policy._build_keys([
 *     { type: 'severity'                    , value: my_severity_level },
 *     { type: 'username' , name: 'username' , value:      user },
 *     { type: 'usernames', name: 'usernames', value: all_users },
 *     { type: 'literal'  , name: 'name'     , value: 'value' }
 * ]);
 */
Policy.prototype._build_keys = function(keys, context) {

    var date = new Date().getTime();

    var policy = this;
    var bb = this.bb;
    function user_username(user) { return user.username }
    function user_link    (user) { return '[URL="' + location.origin + bb.url_for.user_show({ user_id: user.user_id }) + '"]' + user.username + '[/URL]' }

    var ret = {
        me: bb.user_current().username,
    };

    [ this.default_keys, keys ].forEach(function(keys) {
        keys.forEach(function(key) {
            switch ( key.type ) {

            case 'severity':
                var level = key.value;
                ret['severity level' ] = level.html;
                ret['infraction type'] = level.type;
                break;

            case 'image':
                ret[key.name + ' URL'  ] =           key.value;
                ret[key.name + ' image'] = '[IMG]' + key.value + '[/IMG]';
                break;

            case 'username':
                ret[key.name               ] = user_username(key.value);
                ret[key.name + ' with link'] = user_link    (key.value);
                break;

            case 'usernames':
                var users = key.value;
                ret[                key.name                 ] = users.filter(function(u) { return  u.is_target  }).map(user_username)[0];
                ret[                key.name +  ' with link' ] = users.filter(function(u) { return  u.is_target  }).map(user_link    )[0];
                ret[                key.name + 's'           ] = users                                             .map(user_username);
                ret[                key.name + 's with links'] = users                                             .map(user_link    );
                ret['primary '    + key.name                 ] = users.filter(function(u) { return  u.is_primary }).map(user_username)[0];
                ret['primary '    + key.name +  ' with link' ] = users.filter(function(u) { return  u.is_primary }).map(user_link    )[0];
                ret['additional ' + key.name + 's'           ] = users.filter(function(u) { return !u.is_primary }).map(user_username);
                ret['additional ' + key.name + 's with links'] = users.filter(function(u) { return !u.is_primary }).map(user_link    );
                ret['other '      + key.name + 's'           ] = users.filter(function(u) { return !u.is_target  }).map(user_username);
                ret['other '      + key.name + 's with links'] = users.filter(function(u) { return !u.is_target  }).map(user_link    );
                break;

            case 'thread':
                ret[key.name + ' id'             ] = key.value.thread_id;
                ret[key.name + ' url'            ] = bb.url_for.thread_show({ thread_id: key.value.thread_id });
                ret[key.name + ' title'          ] = key.value.thread_desc;
                ret[key.name + ' title with link'] = '[thread=' + key.value.thread_id + ']' + key.value.thread_desc + '[/thread]';
                break;

            case 'forum':
                ret[key.name + ' title'          ] = key.value.forum_desc;
                ret[key.name + ' title with link'] = '[URL="' + location.origin + bb.url_for.forum_show({ forum_id: key.value.forum_id }) + '"]' + key.value.forum_desc + '[/URL]';
                break;

            case 'action data':
                if ( context == 'widget' ) break;
                var action_data = key.value;
                if ( action_data.hasOwnProperty('deadline') &amp;&amp; action_data.deadline != '' ) {

                    var deadline = parse_duration(action_data.deadline);
                    if ( deadline ) {
                        action_data.deadline = deadline.date.getTime();
                        ret.deadline = deadline.date.toUTCString().replace(/:[0-9][0-9] /, ' ' );
                    } else {
                        alert( 'invalid deadline: ' + action_data.deadline );
                        throw 'invalid deadline: ' + action_data.deadline;
                    }

                }

                ret[key.name] = policy.v.escape(
                    bb.stringify( 'action data', $.extend( { namespace: policy._namespace, name: policy.name, date: date }, action_data ) )
                );
                break;

            case 'literal':
                ret[key.name] = key.value;
                break;

            }
        });
    });

    return ret;

}

/**
 * @summary Build arguments to pass to a widget
 * @param {Object}         args arguments to pass
 * @param {Array.&lt;Object>} keys keys to pass
 * @protected
 * @example
 * var args = this._build_widget_args({foo: 'bar'}, [
 *     { type: 'severity'                               , value: my_severity_level },
 *     { type: 'username' , name:            'username' , value:      user },
 *     { type: 'usernames', name:            'usernames', value: all_users },
 *     { type: 'literal', name: 'name' , value: 'value' }
 * ], Array.prototype.slice.call( arguments, 1 ));
 */
Policy.prototype._build_widget_args = function(args, keys, extra_args) {
    return $.extend.apply(
        $,
        [
            { keys: this._build_keys(keys, 'widget') },
            this._widget_args,
            args
        ].concat(extra_args)
    );
}

/*
 * EXTRA POST WIDGETS
 */

/**
 * @summary Build values to initialise or update an extra_post widget
 * @param {Object=}   level severity level
 * @param {...Object} more arguments
 * @protected
 * @return {Object} extra_post arguments
 */
Policy.prototype.extra_post_args = function(level) {

    if ( !level ) level = this.severity_level;

    var extra_data = this.get( this.name.concat([ 'extra action', level.html ]) ).text;

    var ret;
    if ( extra_data === null )
        ret = { visible: false, checked: false, text: '' }
    else
        ret = this._extra_post_values[extra_data.toLowerCase()] || { visible: false, checked: false, text: '' };

    ret. title_variable = this.name.concat([ ret.var_prefix + ' post title'  ]);
    ret.bbcode_variable = this.name.concat([ ret.var_prefix + ' post bbcode' ]);

    return this._build_widget_args( ret, [{ type: 'severity' , value: level }], Array.prototype.slice.call( arguments, 1 ) );

}

/**
 * @summary Build an action for an extra_post widget
 * @param {Object=} level severity level
 * @param {...Object} more arguments
 * @protected
 * @return {Action}
 */
Policy.prototype.extra_post_action = function(widget) {

    var value = widget.val();
    return new Action(
        this.name.join(': ') + ' extra post wrapper',
        ( value.checked &amp;&amp; value.text == this._extra_post_values['ip ban'].text )
            ? new IPAddressReport({ bb: this.bb, users: [this.user] }).action().then(widget.action())
            : widget.action()
    );

}


/*
 * NOTIFICATION SELECTOR WIDGETS
 */

/**
 * @summary Build values to initialise or update a notification_selector widget
 * @param {Object=} level severity level
 * @param {...Object} more arguments
 * @protected
 * @return {Object} notification_selector arguments
 */
Policy.prototype.notification_selector_args = function(level) {

    var title_suffix = ' title';

    if ( !level ) level = this.severity_level;
    if ( level.type == 'infraction' || level.type == 'warning' ) title_suffix = ' administrative note';

    var default_violation = this.get( this.name.concat([ 'default violation' ]).concat(this.variable_suffix) );

    return this._build_widget_args({
        level: level.type,
              title_variable: this.name.concat([ level.type + title_suffix  ]).concat(this.variable_suffix),
                ban_variable: this.name.concat([               'ban reason' ]).concat(this.variable_suffix),
             bbcode_variable: this.name.concat([ level.type + ' bbcode'     ]).concat(this.variable_suffix),
         note_title_variable: this.name.concat([ 'note' +     ' title'      ]).concat(this.variable_suffix),
        note_bbcode_variable: this.name.concat([ 'note' +     ' bbcode'     ]).concat(this.variable_suffix),
        show_violations: default_violation.text !== null,
        violation      : ( default_violation.text === null ) ? this._default_violation : this.v.parse( default_violation.text ),
        user: this.user
    }, [{ type: 'severity' , value: level }], Array.prototype.slice.call( arguments, 1 ) );

}

/**
 * @summary Build an action for a notification_selector widget
 * @param {Object=} level severity level
 * @param {...Object} more arguments
 * @protected
 * @return {Action}
 */
Policy.prototype.notification_selector_action = function(widget) { return widget.action() }


/*
 * DEADLINE WIDGETS
 */

/**
 * @summary Build values to initialise or update a deadline widget
 * @param {Object=} level severity level
 * @param {...Object} more arguments
 * @protected
 * @return {Object} deadline arguments
 */
Policy.prototype.deadline_args = function() {

    var deadlines = this.resolve( ['deadlines'].concat(this.variable_suffix), {}, 'array of items' ).map(function(deadline) {
        deadline = deadline.value.split(/\s*:\s*/, 2 );
        return { value: deadline[0], text: deadline[1] };
    });

    return this._build_widget_args({
        deadline : this.check( ['deadline'].concat(this.variable_suffix) ) ? this.resolve( ['deadline'].concat(this.variable_suffix) ) : '',
        deadlines: deadlines,
         title_variable: ['deadline post title' ].concat(this.variable_suffix),
        bbcode_variable: ['deadline post bbcode'].concat(this.variable_suffix)
    }, [], Array.prototype.slice.call( arguments, 1 ));

}

/**
 * @summary Build an action for a deadline widget
 * @param {Object=} level severity level
 * @param {...Object} more arguments
 * @protected
 * @return {Action}
 */
Policy.prototype.deadline_action = function(widget) { return widget.action() }


/*
 * SEVERITY SLIDER WIDGETS
 */

/**
 * @summary Build values to initialise or update a severity_slider widget
 * @param {Object=} level severity level
 * @param {...Object} more arguments
 * @protected
 * @return {Object} severity_slider arguments
 */
Policy.prototype.severity_slider_args = function(level) {
    return this._build_widget_args({
        levels:          this.severity_levels,
        value : level || this.severity_level.html
    }, [], Array.prototype.slice.call( arguments, 1 ));
}


/*
 * DUPLICATE ACCOUNT LIST WIDGETS
 */

/**
 * @summary Build values to initialise or update a duplicate_account_list widget
 * @param {Object=} level severity level
 * @param {...Object} more arguments
 * @protected
 * @return {Object} duplicate_account_list arguments
 */
Policy.prototype.duplicate_account_list_args = function(level) {
    return this._build_widget_args({}, [], Array.prototype.slice.call( arguments, 1 ));
}

/*
 * COMMON NON-WIDGET-RELATED ACTIONS
 */

/**
 * @summary Close the thread targeted by this policy
 * @protected
 * @return {Action}
 */
Policy.prototype.close_thread = function() {

    var policy = this;

    return new Action( 'close thread', {
        fire: function() {
            return policy.bb.thread_openclose( policy._widget_args.thread_id, false );
        },
        description: function() {
            return [
                {
                    type: 'close',
                    target: { thread_id: policy._widget_args.thread_id, thread_desc: policy._widget_args.thread_desc }
                },
            ];
        },
    })

}
</code></pre>
        </article>
    </section>








        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-beta1</a> on 22 June 2015
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
